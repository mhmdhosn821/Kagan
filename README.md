# Kagan ERP System

ุณุณุชู ERP ุฌุงูุน ุจุฑุง ูุฏุฑุช ฺฉุณุจูฺฉุงุฑ ุชุฑฺฉุจ ุขุฑุงุดฺฏุงู ู ฺฉุงูู

![Kagan ERP](https://github.com/user-attachments/assets/debb2c5d-443f-4406-a41c-7f9ce2be8991)

## ๐ ูุณุฎู ุฌุฏุฏ: ุงูพูฺฉุดู ุฏุณฺฉุชุงูพ PyQt6

ุนูุงูู ุจุฑ ูุณุฎู ูุจุ ุงฺฉููู **ุงูพูฺฉุดู ุฏุณฺฉุชุงูพ ุญุฑููโุง** ุจุง PyQt6 ูุฒ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช!

### ูฺฺฏโูุง ุงูพูฺฉุดู ุฏุณฺฉุชุงูพ:
- ๐ฅ๏ธ **ุฑุงุจุท ฺฉุงุฑุจุฑ ูุชู**: ุณุฑุน ู ุฑูุงู
- ๐ฑ **RTL ฺฉุงูู**: ุทุฑุงุญ ุดุฏู ุจุฑุง ุฒุจุงู ูุงุฑุณ
- ๐พ **ุฏุชุงุจุณ ูุญู**: SQLite ุจุฏูู ูุงุฒ ุจู ุณุฑูุฑ
- ๐ **ุงููุช**: ุงุญุฑุงุฒ ููุช ู ูุญุฏูุฏุณุงุฒ ุฏุณุชุฑุณ
- ๐จ **ุทุฑุงุญ ูุฏุฑู**: ุงุณุชุงู ุญุฑููโุง ู ุฒุจุง

**ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุงูพูฺฉุดู ุฏุณฺฉุชุงูพุ ุจู ูพูุดู [`kagan_desktop`](./kagan_desktop/) ูุฑุงุฌุนู ฺฉูุฏ.**

```bash
cd kagan_desktop
python main.py
```

[๐ ูุณุชูุฏุงุช ฺฉุงูู ุงูพูฺฉุดู ุฏุณฺฉุชุงูพ](./kagan_desktop/README.md) | [๐ ุฑุงูููุง ุงุณุชูุงุฏู](./kagan_desktop/USAGE.md)

## ูฺฺฏโูุง ุงุตู

### ฑ. ุงูุจุงุฑุฏุงุฑ ุฏูฺฏุงูู (Dual Inventory)
- **ุงูุจุงุฑ ฺฉุงูู**: ููุงุฏ ุงููู (ุดุฑุ ููููุ ุดฺฉูุงุช) ุจุง ูุงุญุฏ ฺฏุฑู/ูุชุฑ
- **ุงูุจุงุฑ ุขุฑุงุดฺฏุงู**: ููุงุฏ ูุตุฑู (ุดุงููพูุ ุฑูฺฏุ ุงฺฉุณุฏุงู) ู ูุญุตููุงุช ูุชุฑู (ูุงฺฉุณ ููุ ุงุฏฺฉูู)
- **ุณุณุชู BOM/ูุฑูููุงุณูู**: ุงุชุตุงู ุฎูุฏฺฉุงุฑ ุฎุฏูุงุช ุจู ููุงุฏ ูุตุฑู
- **ูุดุฏุงุฑ ุฎูุฏฺฉุงุฑ**: ููุชูฺฉุดู ุฏุฑ ุตูุฑุช ุฑุณุฏู ุจู ุญุฏุงูู ููุฌูุฏ
- ฺฉุณุฑ ุฎูุฏฺฉุงุฑ ููุฌูุฏ ูพุณ ุงุฒ ูุฑ ูุฑูุด

### ฒ. ุจุฎุด ุขุฑุงุดฺฏุงู
- ุชุนุฑู ุฎุฏูุงุช ูุฎุชูู (ุงุตูุงุญุ ฺฏุฑูุ ูุงุณุงฺุ ุฑูฺฏ ูู)
- ูุฏุฑุช ุขุฑุงุดฺฏุฑุงู ู ุชุนู ุฏุฑุตุฏ ฺฉูุณูู
- ุณุณุชู ููุจุชโุฏู (Booking) ุจุง ูุฏุฑุช ุชููู
- ฺฏุฒุงุฑุด ฺฉูุณูู ุฑูุฒุงูู/ูุงูุงูู ุจุฑุง ูุฑ ุขุฑุงุดฺฏุฑ
- ูุงฺฉุชูุฑุฒู ุชุฑฺฉุจ (ุฎุฏูุช + ูุฑูุด ฺฉุงูุง)

### ณ. ุจุฎุด ฺฉุงูู
- ููู ููุดููุฏ ุจุง Recipe ุจุฑุง ูุฑ ูุญุตูู
- ุฑุงุจุท POS ุจุฑุง ูุฑูุด ุณุฑุน
- ฺฉุณุฑ ุฎูุฏฺฉุงุฑ ููุงุฏ ุงููู ุจุฑ ุงุณุงุณ ุฏุณุชูุฑ ูพุฎุช (Recipe)
- ุฏุณุชูโุจูุฏ ูุญุตููุงุช (ููููุ ฺุงุ ุฏุณุฑ)

### ด. ุณุณุชู ูุดุชุฑุงู (CRM)
- ูพุฑููุฏู ุงูฺฉุชุฑููฺฉ ูุดุชุฑ ุจุง ุชุงุฑุฎฺู ฺฉุงูู
- ุซุจุช ุงุทูุงุนุงุช ุชูุงุณ ู ุงุฏุฏุงุดุชโูุง
- ุณูุงุจู ุฎุฏูุงุช ู ูพุฑุฏุงุฎุชโูุง
- ุจุงุดฺฏุงู ููุงุฏุงุฑ ุจุง ุงูุชุงุฒุฏู ุฎูุฏฺฉุงุฑ (ฑ ุงูุชุงุฒ ุจู ุงุฒุง ูุฑ ฑฐ,ฐฐฐ ุฑุงู)
- ุขูุงุฏฺฏ ุจุฑุง ุงุชุตุงู ุจู ูพูู ูพุงูฺฉ

### ต. ูุฏุฑุช ูุงู
- ฺฏุฒุงุฑุด ุณูุฏ ุฎุงูุต
- ูุญุงุณุจู ููุฌูุฏ ุฑุงู ุงูุจุงุฑ
- ุชุฑุงุฒ ูุงู
- ฺฏุฒุงุฑุด ูุฑูุด ุฑูุฒุงูู/ูุงูุงูู
- ุชูฺฉฺฉ ูุฑูุด ุจุฑ ุงุณุงุณ ููุน (ุขุฑุงุดฺฏุงู/ฺฉุงูู)

### ถ. ุงููุช ู ุณุทุญ ุฏุณุชุฑุณ
- ููุดโูุง ูุฎุชูู: ุงุฏููุ ุขุฑุงุดฺฏุฑุ ุจุงุฑุณุชุง
- ูุญุฏูุฏุณุงุฒ ุฏุณุชุฑุณ ุจู API ุจุฑ ุงุณุงุณ ููุด
- ุงุญุฑุงุฒ ููุช JWT-based
- ุฑูุฒูฺฏุงุฑ ุงูู ูพุณูุฑุฏูุง ุจุง bcrypt

## ุชฺฉููููฺโูุง ุงุณุชูุงุฏู ุดุฏู

### ูุณุฎู ูุจ (Web API)
- **Backend**: Python 3.9+ ุจุง FastAPI
- **Database**: SQLAlchemy ORM ุจุง SQLite (ูุงุจู ุชุบุฑ ุจู PostgreSQL)
- **Authentication**: JWT ุจุง python-jose
- **Password Hashing**: bcrypt
- **Frontend**: HTML/CSS/JavaScript ุจุง Bootstrap RTL
- **Font**: Vazir (ูููุช ูุงุฑุณ)

### ูุณุฎู ุฏุณฺฉุชุงูพ (Desktop App)
- **GUI Framework**: PyQt6
- **Database**: SQLite (ูุญูุ ุจุฏูู ูุงุฒ ุจู ุณุฑูุฑ)
- **Font**: Vazir / Tahoma (ูุงุฑุณ)
- **Direction**: RTL
- **Authentication**: SHA256 Hash

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Python 3.9 ุง ุจุงูุงุชุฑ
- pip

### ูุฑุงุญู ูุตุจ

1. **ฺฉููู ฺฉุฑุฏู ูพุฑูฺู**:
```bash
git clone https://github.com/mhmdhosn821/Kagan.git
cd Kagan
```

2. **ูุตุจ ูุงุจุณุชฺฏโูุง**:
```bash
pip install -r requirements.txt
```

3. **ุงุฌุงุฏ ูุงู ุชูุธูุงุช**:
```bash
cp .env.example .env
```

4. **ูุฑุงุด ูุงู `.env`** ู ุชูุธู ูพุงุฑุงูุชุฑูุง (ุฏุฑ ุตูุฑุช ูุงุฒ):
```env
DATABASE_URL=sqlite:///./kagan.db
SECRET_KEY=your-secret-key-here
```

5. **ููุฏุงุฑุฏู ุงููู ุฏุชุงุจุณ**:
```bash
python init_db.py
```

ุงู ุฏุณุชูุฑ ุฏุชุงุจุณ ุฑุง ุงุฌุงุฏ ู ฺฉุงุฑุจุฑุงู ู ุฏุงุฏูโูุง ููููู ุฒุฑ ุฑุง ุงุถุงูู ูโฺฉูุฏ:
- **Admin**: username=`admin`, password=`admin123`
- **Barber**: username=`barber1`, password=`barber123`
- **Barista**: username=`barista1`, password=`barista123`

6. **ุงุฌุฑุง ุจุฑูุงูู**:
```bash
python app/main.py
```

ุง ุจุง uvicorn:
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

7. **ุฏุณุชุฑุณ ุจู ุจุฑูุงูู**:
- ุตูุญู ุงุตู: http://localhost:8000
- ูุณุชูุฏุงุช API (Swagger): http://localhost:8000/docs
- ูุณุชูุฏุงุช ุฌุงฺฏุฒู (ReDoc): http://localhost:8000/redoc

## ุงุณุชูุงุฏู ุงุฒ API

### ุซุจุช ูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ
```bash
curl -X POST "http://localhost:8000/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "user1",
    "email": "user@example.com",
    "full_name": "ฺฉุงุฑุจุฑ ุชุณุช",
    "password": "pass123",
    "role": "barber",
    "commission_percentage": 30
  }'
```

### ูุฑูุฏ ุจู ุณุณุชู
```bash
curl -X POST "http://localhost:8000/auth/login" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=admin123"
```

ูพุงุณุฎ:
```json
{
  "access_token": "eyJhbGc...",
  "token_type": "bearer",
  "user_id": 1,
  "username": "admin",
  "role": "admin"
}
```

### ุฏุฑุงูุช ูุณุช ูุดุชุฑุงู
```bash
curl -X GET "http://localhost:8000/customers/" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### ุงูุฒูุฏู ฺฉุงูุง ุจู ุงูุจุงุฑ
```bash
curl -X POST "http://localhost:8000/inventory/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ุดุฑ",
    "code": "CAF-001",
    "inventory_type": "cafe",
    "item_type": "raw_material",
    "unit": "liter",
    "min_stock_alert": 2.0,
    "unit_price": 50000
  }'
```

### ุงุฌุงุฏ ูุงฺฉุชูุฑ
```bash
curl -X POST "http://localhost:8000/invoices/" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": 1,
    "invoice_type": "cafe",
    "items": [
      {
        "item_type": "product",
        "product_id": 1,
        "quantity": 2,
        "unit_price": 50000
      }
    ],
    "discount_amount": 0,
    "payment_method": "cash"
  }'
```

## ุชุณุช ุณุณุชู

### ุงุฌุฑุง ุชุณุชโูุง API
```bash
python test_api.py
```

ุงู ุฏุณุชูุฑ ุชูุงู endpoint ูุง API ุฑุง ุชุณุช ูโฺฉูุฏ ู ูุชุฌู ุฑุง ููุงุด ูโุฏูุฏ.

### ุงุฌุฑุง ุฏูู
```bash
python demo.py
```

ุงู ุงุณฺฉุฑูพุช ฺฉ ุณูุงุฑู ฺฉุงูู ุงุฒ ุงุฌุงุฏ ูุงฺฉุชูุฑุ ฺฉุณุฑ ุฎูุฏฺฉุงุฑ ููุฌูุฏ ู ูุญุงุณุจู ฺฉูุณูู ุฑุง ููุงุด ูโุฏูุฏ.

## ุณุงุฎุชุงุฑ ูพุฑูฺู

```
kagan/
โโโ app/
โ   โโโ __init__.py
โ   โโโ main.py              # ููุทู ูุฑูุฏ ุจุฑูุงูู
โ   โโโ config.py            # ุชูุธูุงุช
โ   โโโ database.py          # ูพฺฉุฑุจูุฏ ุฏุชุงุจุณ
โ   โโโ models/              # ูุฏูโูุง ุฏุชุงุจุณ
โ   โ   โโโ user.py         # ฺฉุงุฑุจุฑุงู ู ููุดโูุง
โ   โ   โโโ customer.py     # ูุดุชุฑุงู
โ   โ   โโโ inventory.py    # ุงูุจุงุฑ
โ   โ   โโโ service.py      # ุฎุฏูุงุช ุขุฑุงุดฺฏุงู
โ   โ   โโโ product.py      # ูุญุตููุงุช ฺฉุงูู ู BOM/Recipe
โ   โ   โโโ invoice.py      # ูุงฺฉุชูุฑูุง
โ   โ   โโโ booking.py      # ููุจุชโุฏู
โ   โโโ routers/            # API endpoints
โ   โ   โโโ auth.py         # ุงุญุฑุงุฒ ููุช
โ   โ   โโโ customers.py    # ูุฏุฑุช ูุดุชุฑุงู
โ   โ   โโโ inventory.py    # ูุฏุฑุช ุงูุจุงุฑ
โ   โ   โโโ barbershop.py   # ุนููุงุช ุขุฑุงุดฺฏุงู
โ   โ   โโโ cafe.py         # ุนููุงุช ฺฉุงูู
โ   โ   โโโ invoices.py     # ูุงฺฉุชูุฑุฒู
โ   โ   โโโ reports.py      # ฺฏุฒุงุฑุดุงุช
โ   โโโ services/           # ูุงุฌฺฉ ฺฉุณุจโูฺฉุงุฑ
โ   โ   โโโ auth.py         # ุณุฑูุณ ุงุญุฑุงุฒ ููุช
โ   โ   โโโ inventory.py    # ุณุฑูุณ ุงูุจุงุฑุฏุงุฑ
โ   โโโ templates/          # ูุงูุจโูุง HTML
โ       โโโ index.html      # ุตูุญู ุฎุงูู
โโโ static/
โ   โโโ css/
โ   โ   โโโ style.css       # ุงุณุชุงูโูุง ุณูุงุฑุด
โ   โโโ js/
โ   โโโ fonts/
โโโ init_db.py              # ุงุณฺฉุฑูพุช ููุฏุงุฑุฏู ุงููู
โโโ test_api.py             # ุชุณุชโูุง API
โโโ demo.py                 # ุงุณฺฉุฑูพุช ุฏูู
โโโ requirements.txt        # ูุงุจุณุชฺฏโูุง ูพุงุชูู
โโโ .env.example            # ููููู ูุงู ุชูุธูุงุช
โโโ .gitignore
โโโ README.md
```

## ูููููโูุง ุงุณุชูุงุฏู

### ฑ. ุงุฌุงุฏ ฺฉ ุฎุฏูุช ุขุฑุงุดฺฏุงู ุจุง BOM
```python
# 1. ุงุฌุงุฏ ุฎุฏูุช ุฑูฺฏ ูู
POST /barbershop/services
{
  "name": "ุฑูฺฏ ูู",
  "category": "coloring",
  "price": 300000,
  "duration_minutes": 90
}

# 2. ุงูุฒูุฏู ููุงุฏ ูุตุฑู ุจู BOM
POST /barbershop/services/{service_id}/bom
{
  "inventory_item_id": 1,  # ุฑูฺฏ ูู
  "quantity": 50  # 50ml
}

POST /barbershop/services/{service_id}/bom
{
  "inventory_item_id": 2,  # ุงฺฉุณุฏุงู
  "quantity": 50  # 50ml
}
```

### ฒ. ุงุฌุงุฏ ูุญุตูู ฺฉุงูู ุจุง Recipe
```python
# 1. ุงุฌุงุฏ ูุญุตูู
POST /cafe/products
{
  "name": "ฺฉุงูพูฺูู",
  "code": "PROD-002",
  "price": 50000,
  "category": "coffee"
}

# 2. ุงูุฒูุฏู ุฏุณุชูุฑ ูพุฎุช
POST /cafe/products/{product_id}/recipe
{
  "inventory_item_id": 1,  # ุดุฑ
  "quantity": 0.15  # 150ml
}

POST /cafe/products/{product_id}/recipe
{
  "inventory_item_id": 2,  # ูููู
  "quantity": 0.02  # 20g
}
```

### ณ. ุซุจุช ููุจุช ุขุฑุงุดฺฏุงู
```python
POST /barbershop/bookings
{
  "customer_id": 1,
  "barber_id": 2,
  "service_id": 1,
  "booking_datetime": "2024-01-15T10:00:00",
  "notes": "ูุดุชุฑ ุญุณุงุณุช ุจู ุฑูฺฏ ุฏุงุฑุฏ"
}
```

## API Endpoints

### Authentication
- `POST /auth/register` - ุซุจุช ูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ
- `POST /auth/login` - ูุฑูุฏ ุจู ุณุณุชู
- `GET /auth/me` - ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ุฌุงุฑ

### Customers
- `GET /customers/` - ูุณุช ูุดุชุฑุงู
- `POST /customers/` - ุงูุฒูุฏู ูุดุชุฑ
- `GET /customers/{id}` - ุฏุฑุงูุช ุงุทูุงุนุงุช ูุดุชุฑ
- `PUT /customers/{id}` - ูุฑุงุด ูุดุชุฑ
- `POST /customers/{id}/loyalty` - ุงูุฒูุฏู ุงูุชุงุฒ ููุงุฏุงุฑ

### Inventory
- `GET /inventory/` - ูุณุช ฺฉุงูุงูุง ุงูุจุงุฑ
- `POST /inventory/` - ุงูุฒูุฏู ฺฉุงูุง ุจู ุงูุจุงุฑ
- `GET /inventory/{id}` - ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงูุง
- `PUT /inventory/{id}` - ูุฑุงุด ฺฉุงูุง
- `POST /inventory/{id}/add-stock` - ุงูุฒูุฏู ููุฌูุฏ
- `GET /inventory/alerts` - ูุดุฏุงุฑูุง ููุฌูุฏ
- `GET /inventory/value` - ุงุฑุฒุด ฺฉู ุงูุจุงุฑ

### Barbershop
- `GET /barbershop/services` - ูุณุช ุฎุฏูุงุช
- `POST /barbershop/services` - ุงูุฒูุฏู ุฎุฏูุช
- `GET /barbershop/services/{id}` - ุฏุฑุงูุช ุงุทูุงุนุงุช ุฎุฏูุช
- `POST /barbershop/services/{id}/bom` - ุงูุฒูุฏู BOM
- `GET /barbershop/bookings` - ูุณุช ููุจุชโูุง
- `POST /barbershop/bookings` - ุซุจุช ููุจุช
- `PUT /barbershop/bookings/{id}/status` - ุชุบุฑ ูุถุนุช ููุจุช
- `GET /barbershop/barbers` - ูุณุช ุขุฑุงุดฺฏุฑุงู

### Cafe
- `GET /cafe/products` - ูุณุช ูุญุตููุงุช
- `POST /cafe/products` - ุงูุฒูุฏู ูุญุตูู
- `GET /cafe/products/{id}` - ุฏุฑุงูุช ุงุทูุงุนุงุช ูุญุตูู
- `POST /cafe/products/{id}/recipe` - ุงูุฒูุฏู Recipe
- `GET /cafe/menu` - ููู ุฏุณุชูโุจูุฏ ุดุฏู

### Invoices
- `GET /invoices/` - ูุณุช ูุงฺฉุชูุฑูุง
- `POST /invoices/` - ุงุฌุงุฏ ูุงฺฉุชูุฑ (ุจุง ฺฉุณุฑ ุฎูุฏฺฉุงุฑ ููุฌูุฏ)
- `GET /invoices/{id}` - ุฏุฑุงูุช ุฌุฒุฆุงุช ูุงฺฉุชูุฑ

### Reports
- `GET /reports/dashboard` - ุฏุงุดุจูุฑุฏ ุฎูุงุตู
- `GET /reports/sales` - ฺฏุฒุงุฑุด ูุฑูุด
- `GET /reports/commission` - ฺฏุฒุงุฑุด ฺฉูุณูู
- `GET /reports/inventory-usage` - ฺฏุฒุงุฑุด ูุตุฑู ุงูุจุงุฑ
- `GET /reports/profit` - ฺฏุฒุงุฑุด ุณูุฏ

## ุชูุณุนู ู ูุดุงุฑฺฉุช

ุจุฑุง ูุดุงุฑฺฉุช ุฏุฑ ุชูุณุนู ุงู ูพุฑูฺู:

1. Fork ฺฉูุฏ
2. ฺฉ branch ุฌุฏุฏ ุจุณุงุฒุฏ (`git checkout -b feature/amazing-feature`)
3. ุชุบุฑุงุช ุฑุง commit ฺฉูุฏ (`git commit -m 'Add amazing feature'`)
4. Push ุจู branch (`git push origin feature/amazing-feature`)
5. ฺฉ Pull Request ุจุงุฒ ฺฉูุฏ

## ูุฌูุฒ

ุงู ูพุฑูฺู ุจุฑุง ุงุณุชูุงุฏู ุดุฎุต ู ุชุฌุงุฑ ุขุฒุงุฏ ุงุณุช.

## ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู ุง ุณูุงูุ ฺฉ Issue ุฏุฑ GitHub ุจุงุฒ ฺฉูุฏ.

## ุชูุณุนูโุฏููุฏู

ุชูุณุนู ุงูุชู ุจุง โค๏ธ ุจุฑุง ฺฉุณุจโูฺฉุงุฑ ฺฉุงฺฏุงู

---

**ูฺฉุชู**: ุงู ุณุณุชู ุจุฑุง ูุญุท production ูุงุฒ ุจู ุชูุธูุงุช ุงููุช ุจุดุชุฑุ ุงุณุชูุงุฏู ุงุฒ PostgreSQL ู ุฑุงูโุงูุฏุงุฒ HTTPS ุฏุงุฑุฏ.